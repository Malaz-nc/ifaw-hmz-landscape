.then(data => {
    debug("Project Sites data loaded successfully");
    
    // Define a diamond icon for project sites
    const projectIcon = L.divIcon({
        className: 'project-site-icon',
        html: '<div style="width: 10px; height: 10px; background-color: transparent; border: 2px solid #FF5722; transform: rotate(45deg);"></div>',
        iconSize: [10, 10],
        iconAnchor: [5, 5]
    });
    
    // Add GeoJSON to map with point markers
    allLayers.projectSites = L.geoJSON(data, {
        pointToLayer: function(feature, latlng) {
            // Use diamond shape with no fill as requested
            return L.marker(latlng, {
                icon: projectIcon,
                opacity: 0.9
            });
        },
        onEachFeature: function(feature, layer) {
            // Add popup
            if (feature.properties) {
                let popupContent = '<div class="popup-content">';
                
                for (const prop in feature.properties) {
                    const value = feature.properties[prop];
                    if (value !== null && value !== undefined && value !== '') {
                        popupContent += `<strong>${prop}:</strong> ${value}<br>`;
                    }
                }
                
                popupContent += '</div>';
                layer.bindPopup(popupContent);
                
                // Add label if name available
                let name = feature.properties.name || feature.properties.Name || 
                          feature.properties.NAME || feature.properties.title || 
                          feature.properties.TITLE || feature.properties.Project || '';
                if (name) {
                    layer.bindTooltip(name, {
                        permanent: false, // Show only on hover
                        direction: 'right',
                        offset: [10, 0],
                        className: 'place-label'
                    });
                }
            }
        }
    });
    
    // Add to overlay control but don't add to map by default
    overlayLayers["Project Sites"] = allLayers.projectSites;
    
    resolve();
})
.catch(error => {
    console.error("Error loading Project Sites data:", error);
    resolve();
});
});
}

// Function to load the Bufferwards layer
function loadBufferwardsLayer(map) {
return new Promise((resolve, reject) => {
fetch('data/bufferwards.geojson')
.then(response => {
    if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
})
.then(data => {
    debug("Bufferwards data loaded successfully");
    
    // Add GeoJSON to map with styling and interactivity
    allLayers.bufferwards = L.geoJSON(data, {
        style: {
            color: '#9C27B0', // Purple color
            weight: 2,
            opacity: 0.7,
            fillOpacity: 0.2,
            fillColor: '#CE93D8'
        },
        onEachFeature: function(feature, layer) {
            // Add popup with properties
            if (feature.properties) {
                let popupContent = '<div class="popup-content">';
                
                for (const prop in feature.properties) {
                    const value = feature.properties[prop];
                    if (value !== null && value !== undefined && value !== '') {
                        if (['shape_leng', 'shape_area', 'SHAPE_Leng', 'SHAPE_Area'].includes(prop)) continue;
                        popupContent += `<strong>${prop}:</strong> ${value}<br>`;
                    }
                }
                
                popupContent += '</div>';
                layer.bindPopup(popupContent);
                
                // Add label if name available
                let name = feature.properties.name || feature.properties.Name || 
                          feature.properties.NAME || feature.properties.Ward || '';
                if (name) {
                    layer.bindTooltip(name, {
                        permanent: true,
                        direction: 'center',
                        className: 'landuse-label'
                    });
                }
            }
            
            // Add click handler for zooming
            layer.on({
                click: zoomToFeature
            });
        }
    });
    
    // Add to overlay control but don't add to map by default
    overlayLayers["Buffer Wards"] = allLayers.bufferwards;
    
    resolve();
})
.catch(error => {
    console.error("Error loading Bufferwards data:", error);
    resolve();
});
});
}

// Function to load the Corridors layer
function loadCorridorsLayer(map) {
return new Promise((resolve, reject) => {
fetch('data/corridors.geojson')
.then(response => {
    if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
})
.then(data => {
    debug("Corridors data loaded successfully");
    
    // Add GeoJSON to map with styling and interactivity
    allLayers.corridors = L.geoJSON(data, {
        style: {
            color: '#4CAF50', // Green color
            weight: 3,
            opacity: 0.7,
            fillOpacity: 0.3,
            fillColor: '#A5D6A7',
            dashArray: '5, 5'
        },
        onEachFeature: function(feature, layer) {
            // Add popup with properties
            if (feature.properties) {
                let popupContent = '<div class="popup-content">';
                
                for (const prop in feature.properties) {
                    const value = feature.properties[prop];
                    if (value !== null && value !== undefined && value !== '') {
                        if (['shape_leng', 'shape_area', 'SHAPE_Leng', 'SHAPE_Area'].includes(prop)) continue;
                        popupContent += `<strong>${prop}:</strong> ${value}<br>`;
                    }
                }
                
                popupContent += '</div>';
                layer.bindPopup(popupContent);
                
                // Add label if name available
                let name = feature.properties.name || feature.properties.Name || 
                          feature.properties.NAME || feature.properties.Corridor || '';
                if (name) {
                    layer.bindTooltip(name, {
                        permanent: true,
                        direction: 'center',
                        className: 'landuse-label'
                    });
                }
            }
            
            // Add click handler for zooming
            layer.on({
                click: zoomToFeature
            });
        }
    });
    
    // Add to overlay control but don't add to map by default
    overlayLayers["Corridors"] = allLayers.corridors;
    
    resolve();
})
.catch(error => {
    console.error("Error loading Corridors data:", error);
    resolve();
});
});
}

// Function to load the Wildlife Corridors layer
function loadWildlifeCorridorsLayer(map) {
return new Promise((resolve, reject) => {
fetch('data/wildlife_corridors.geojson')
.then(response => {
    if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
})
.then(data => {
    debug("Wildlife Corridors data loaded successfully");
    
    // Add GeoJSON to map with styling and interactivity
    allLayers.wildlifeCorridors = L.geoJSON(data, {
        style: {
            color: '#FF9800', // Orange color
            weight: 3,
            opacity: 0.8,
            fillOpacity: 0.3,
            fillColor: '#FFCC80',
            dashArray: '10, 5'
        },
        onEachFeature: function(feature, layer) {
            // Add popup with properties
            if (feature.properties) {
                let popupContent = '<div class="popup-content">';
                
                for (const prop in feature.properties) {
                    const value = feature.properties[prop];
                    if (value !== null && value !== undefined && value !== '') {
                        if (['shape_leng', 'shape_area', 'SHAPE_Leng', 'SHAPE_Area'].includes(prop)) continue;
                        popupContent += `<strong>${prop}:</strong> ${value}<br>`;
                    }
                }
                
                popupContent += '</div>';
                layer.bindPopup(popupContent);
                
                // Add label if name available
                let name = feature.properties.name || feature.properties.Name || 
                          feature.properties.NAME || feature.properties.Corridor || '';
                if (name) {
                    layer.bindTooltip(name, {
                        permanent: true,
                        direction: 'center',
                        className: 'landuse-label'
                    });
                }
            }
            
            // Add click handler for zooming
            layer.on({
                click: zoomToFeature
            });
        }
    });
    
    // Add to overlay control but don't add to map by default
    overlayLayers["Wildlife Corridors"] = allLayers.wildlifeCorridors;
    
    resolve();
})
.catch(error => {
    console.error("Error loading Wildlife Corridors data:", error);
    resolve();
});
});
}

// Function to load the Watersources layer
function loadWatersourcesLayer(map) {
return new Promise((resolve, reject) => {
fetch('data/watersources.geojson')
.then(response => {
    if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
})
.then(data => {
    debug("Watersources data loaded successfully");
    
    // Add GeoJSON to map with point markers
    allLayers.watersources = L.geoJSON(data, {
        pointToLayer: function(feature, latlng) {
            return L.circleMarker(latlng, {
                radius: 3,
                fillColor: "#2196F3", // Blue for water
                color: "#0D47A1",
                weight: 1,
                opacity: 1,
                fillOpacity: 0.8
            });
        },
        onEachFeature: function(feature, layer) {
            // Add popup with properties
            if (feature.properties) {
                let popupContent = '<div class="popup-content">';
                
                for (const prop in feature.properties) {
                    const value = feature.properties[prop];
                    if (value !== null && value !== undefined && value !== '') {
                        popupContent += `<strong>${prop}:</strong> ${value}<br>`;
                    }
                }
                
                popupContent += '</div>';
                layer.bindPopup(popupContent);
                
                // Add label if name available
                let name = feature.properties.name || feature.properties.Name || 
                          feature.properties.NAME || feature.properties.type || '';
                if (name) {
                    layer.bindTooltip(name, {
                        permanent: false, // Only show on hover
                        direction: 'right',
                        offset: [10, 0],
                        className: 'place-label'
                    });
                }
            }
        }
    });
    
    // Add to overlay control but don't add to map by default
    overlayLayers["Water Sources"] = allLayers.watersources;
    
    resolve();
})
.catch(error => {
    console.error("Error loading Watersources data:", error);
    resolve();
});
});
}

// Helper function to find the designation property
function findDesignationProperty(properties) {
// Check for common property names that might contain designation information
// Listed in order of preference
const possibleProps = [
'desig', 'designation', 'type', 'class', 'landuse', 'land_use', 
'landcover', 'land_cover', 'category', 'zone'
];

for (const prop of possibleProps) {
if (properties[prop] !== undefined && properties[prop] !== null && properties[prop] !== '') {
return properties[prop];
}
}

// If we can't find a specific designation property, try to find anything with "park", "forest", etc.
for (const prop in properties) {
const value = String(properties[prop]).toLowerCase();
if (value.includes('park') || value.includes('forest') || 
value.includes('safari') || value.includes('conservation') ||
value.includes('reserve') || value.includes('protected')) {
return properties[prop];
}
}

return 'Unknown';
}

// Function to determine color based on the designation
function getColor(designation) {
// Default color for Unknown/Resettlement Areas is brown
let color = '#A52A2A'; // Brown for "Resettlement Area/Unknown"

// If no designation provided, return brown (default)
if (!designation) return color;

// Convert designation to lowercase for case-insensitive comparison
const desig = String(designation).toLowerCase();

// Debug the designation
debug(`Checking designation: "${desig}"`);

// Assign colors based on designation types
if (desig.includes('national park') || desig.includes('np') || desig.includes('park')) {
color = '#90EE90'; // Light green for National Parks
debug(`  Matched as National Park: ${color}`);
} else if (desig.includes('forest') || desig.includes('forestry') || 
  desig.includes('state forest') || desig.includes('reserve') ||
  desig.includes('fr ')) {
color = '#006400'; // Dark green for Forest areas
debug(`  Matched as Forest: ${color}`);
} else if (desig.includes('safari') || desig.includes('game') || 
  desig.includes('hunting') || desig.includes('sa ')) {
color = '#F5DEB3'; // Beige for Safari areas
debug(`  Matched as Safari: ${color}`);
} else if (desig.includes('community') || desig.includes('conservancy') || 
  desig.includes('concession') || desig.includes('ca ') ||
  desig.includes('ct/') || desig.includes('ct')) {
color = '#D2B48C'; // Tan/Brown for Community Conservation Areas
debug(`  Matched as Community: ${color}`);
} else {
debug(`  No match - using Resettlement Area: ${color}`);
}

return color;
}

// Style function for Land Use GeoJSON features
function styleLandUse(feature) {
// Find the designation property
const designation = findDesignationProperty(feature.properties);

// Get color based on designation
const color = getColor(designation);

return {
fillColor: color,
weight: 1,
opacity: 1,
color: '#666',
dashArray: '',
fillOpacity: 0.7
};
}

// Style function for Community CA features - specific brown color
function styleCommunityCA(feature) {
return {
fillColor: '#8B4513', // Dark brown for Community CA
weight: 1,
opacity: 1,
color: '#666',
dashArray: '',
fillOpacity: 0.6
};
}

// Style function for Matetsi Units features - beige color for Safari
function styleMatetsiUnits(feature) {
return {
fillColor: '#F5DEB3', // Beige for Safari Areas
weight: 1,
opacity: 1,
color: '#666',
dashArray: '',
fillOpacity: 0.6
};
}

// Specific function for land use features to ensure proper labeling
function onEachLandUseFeature(feature, layer) {
// Create a popup with feature information
if (feature.properties) {
// Find the most likely name and designation properties
const designation = findDesignationProperty(feature.properties);
let name = feature.properties.name || feature.properties.Name || 
      feature.properties.NAME || feature.properties.title || 
      feature.properties.TITLE || '';

let popupContent = '<div class="popup-content">';

// Add designation if available
if (designation) {
// If the designation is "Unknown", display "Resettlement Area" instead
const displayDesignation = designation === 'Unknown' ? 'Resettlement Area' : designation;
popupContent += `<strong>Designation:</strong> ${displayDesignation}<br>`;
}

// Add name if available
if (name) {
popupContent += `<strong>Name:</strong> ${name}<br>`;
}

// Add all other properties that might be useful
for (const prop in feature.properties) {
// Skip properties we've already included or that are empty
if (['shape_leng', 'shape_area', 'SHAPE_Leng', 'SHAPE_Area'].includes(prop)) continue;
if (prop === 'name' || prop === 'Name' || prop === 'NAME' || 
    prop === 'desig' || prop === 'designation' || prop === 'type') continue;

const value = feature.properties[prop];
if (value !== null && value !== undefined && value !== '') {
    popupContent += `<strong>${prop}:</strong> ${value}<br>`;
}
}

// Close the popup content div
popupContent += '</div>';

// Bind popup to layer
layer.bindPopup(popupContent);

// Add label for land use - ENSURE THIS WORKS BY MAKING LABEL PERMANENT
if (name) {
// Use a timeout to ensure labels are applied after the map is fully loaded
setTimeout(() => {
    try {
        // Get centroid for better label placement
        let centroid;
        if (feature.geometry.type === "Polygon" || feature.geometry.type === "MultiPolygon") {
            // For polygons, use the layer's getBounds method to find the center
            const bounds = layer.getBounds();
            centroid = bounds.getCenter();
        } else {
            // For other geometries, just use the layer's coordinates
            centroid = layer.getLatLng();
        }
        
        // Create a marker at the centroid with the label
        const labelMarker = L.marker(centroid, {
            icon: L.divIcon({
                html: name,
                className: 'landuse-label',
                iconSize: [100, 20],
                iconAnchor: [50, 10]
            })
        }).addTo(window.map);
        
        // Store the label marker reference to allow toggling it with the layer
        layer.labelMarker = labelMarker;
    } catch (e) {
        console.error("Error adding label:", e);
    }
}, 500);
}
}

// Only add click handler for zooming, no mouseover effects
layer.on({
click: zoomToFeature
});
}

// Function to add interactivity to general features (without labels)
function onEachFeature(feature, layer) {
// Create a popup with feature information
if (feature.properties) {
let popupContent = '<div class="popup-content">';

// Loop through all properties and add them to the popup
for (const prop in feature.properties) {
const value = feature.properties[prop];
if (value !== null && value !== undefined && value !== '') {
    // Skip some properties that aren't interesting for display
    if (['shape_leng', 'shape_area', 'SHAPE_Leng', 'SHAPE_Area'].includes(prop)) continue;
    
    popupContent += `<strong>${prop}:</strong> ${value}<br>`;
}
}

// Close the popup content div
popupContent += '</div>';

// Bind popup to layer
layer.bindPopup(popupContent);
}

// Only add click handler for zooming, no mouseover effects
layer.on({
click: zoomToFeature
});
}

// Zoom to feature function
function zoomToFeature(e) {
window.map.fitBounds(e.target.getBounds());
}

// Create a legend for the map
function createLegend(map) {
try {
const legend = L.control({ position: 'bottomright' });

legend.onAdd = function() {
const div = L.DomUtil.create('div', 'info legend');
const categories = [
    { name: 'National Park', value: 'national park' },
    { name: 'Forest/State Forest', value: 'forest' },
    { name: 'Safari Area', value: 'safari' },
    { name: 'Community Conservation', value: '8B4513', isHex: true },
    { name: 'Resettlement Area', value: '' },
    { name: 'Buffer Wards', value: '9C27B0', isHex: true },
    { name: 'Wildlife Corridors', value: 'FF9800', isHex: true },
    { name: 'Project Sites', value: 'FF5722', isHex: true, isDiamond: true }
];

div.innerHTML = '<h4>Map Legend</h4>';

// Loop through our categories and generate a label with a colored square for each
for (let i = 0; i < categories.length; i++) {
    const color = categories[i].isHex ? 
                  categories[i].value : 
                  getColor(categories[i].value);
    
    if (categories[i].isDiamond) {
        // Create diamond shape for project sites
        div.innerHTML +=
            '<i style="background:transparent; border: 2px solid #' + categories[i].value + '; transform: rotate(45deg);"></i> ' +
            categories[i].name + '<br>';
    } else {
        div.innerHTML +=
            '<i style="background:' + (categories[i].isHex ? '#' + categories[i].value : color) + '"></i> ' +
            categories[i].name + '<br>';
    }
}

return div;
};

legend.addTo(map);

return legend;
} catch (error) {
console.error("Error creating legend:", error);
}
}
</script>    
<!-- Custom JavaScript -->
<script>
// Simple debug function to log messages to console
function debug(message) {
console.log(`HMZ-WebGIS: ${message}`);
}

// Set up configuration 
const CONFIG = {
mapCenter: [-18.5, 26], // Hwange-Matetsi-Zambezi area
defaultZoom: 8,
maxZoom: 18,
minZoom: 5
};

// Store all layers
const allLayers = {};
const overlayLayers = {}; // For layer control

// Initialize the map when document is ready
document.addEventListener('DOMContentLoaded', function() {
debug("Document ready, initializing map...");

// Add CSS for labels
const style = document.createElement('style');
style.innerHTML = `
.landuse-label {
background: none !important;
border: none !important;
box-shadow: none !important;
font-size: 12px !important;
font-weight: bold !important;
color: #333 !important;
text-shadow: 2px 2px 3px white, -2px -2px 3px white, 2px -2px 3px white, -2px 2px 3px white !important;
pointer-events: none !important;
z-index: 1000 !important;
}
.place-label {
background: none !important;
border: none !important;
box-shadow: none !important;
font-size: 11px !important;
font-weight: bold !important;
color: #000 !important;
text-shadow: 2px 2px 3px white, -2px -2px 3px white, 2px -2px 3px white, -2px 2px 3px white !important;
pointer-events: none !important;
z-index: 1000 !important;
}
`;
document.head.appendChild(style);

initializeMap();
});

// Initialize the map and load layers
function initializeMap() {
debug("Creating map...");

// Create the map with a global variable so we can access it elsewhere
window.map = L.map('landuse-map', {
center: [-18.86, 26.31], // Centered more on Hwange National Park
zoom: 9, // Closer zoom to focus on the area
maxZoom: CONFIG.maxZoom,
minZoom: CONFIG.minZoom
});
debug("Map created successfully");

// Add base layers
debug("Setting up basemap layers...");
const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(window.map);

const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
});

const terrain = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
attribution: 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
});

const googleTerrain = L.tileLayer('https://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}', {
maxZoom: 20,
subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
attribution: '&copy; Google Maps'
});

const cartoLight = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
subdomains: 'abcd',
maxZoom: 20
});

const baseLayers = {
"OpenStreetMap": osm,
"Satellite": satellite,
"Terrain": terrain,
"Google Terrain": googleTerrain,
"Carto Light": cartoLight
};

// Load all GeoJSON layers
debug("Loading GeoJSON layers...");
Promise.all([
loadLandUseLayer(window.map),
loadCommunityCALayer(window.map),
loadMatetsiUnitsLayer(window.map),
loadLandscapeBoundaryLayer(window.map),
loadDistrictBoundariesLayer(window.map),
loadRiversLayer(window.map),
loadRoadsLayer(window.map),
loadPlacesLayer(window.map),
loadProjectSitesLayer(window.map),
loadBufferwardsLayer(window.map),
loadCorridorsLayer(window.map),
loadWildlifeCorridorsLayer(window.map),
loadWatersourcesLayer(window.map)
])
.then(()<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hwange-Matetsi-Zambezi Land Use Map</title>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
crossorigin=""/>

<!-- Custom Styles (Internal to avoid CSS conflicts) -->
<style>
body {
padding: 0;
margin: 0;
font-family: Arial, Helvetica, sans-serif;
}

.container {
padding: 20px;
max-width: 1200px;
margin: 0 auto;
}

h1 {
color: #333;
margin-bottom: 15px;
}

/* Map container - KEEP THE ID AS landuse-map to match the JS */
#landuse-map {
height: 80vh;
width: 100%;
border: 1px solid #ccc;
position: relative;
z-index: 1; /* Ensure map is below tooltips/popups */
}

/* Loading indicator */
#loading-indicator {
padding: 10px;
background-color: #f8f9fa;
border: 1px solid #ddd;
margin-bottom: 10px;
text-align: center;
font-weight: bold;
color: #666;
}

/* Info box styles */
.info {
padding: 6px 8px;
font: 14px/16px Arial, Helvetica, sans-serif;
background: white;
background: rgba(255, 255, 255, 0.8);
box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
border-radius: 5px;
}

.info h4 {
margin: 0 0 5px;
color: #333;
}

.legend {
line-height: 18px;
color: #555;
}

.legend i {
width: 18px;
height: 18px;
float: left;
margin-right: 8px;
opacity: 0.7;
}

/* Popup styles */
.popup-content {
padding: 10px;
font-size: 14px;
}

.popup-content strong {
color: #333;
}

/* Error message */
.error-message {
color: red;
text-align: center;
padding: 20px;
font-weight: bold;
}

/* Land use colors */
.color-box {
display: inline-block;
width: 15px;
height: 15px;
margin-right: 5px;
vertical-align: middle;
}

.national-park {
background-color: #90EE90; /* Light green */
}

.forest {
background-color: #006400; /* Dark green */
}

.safari {
background-color: #F5DEB3; /* Beige */
}

.community {
background-color: #8B4513; /* Dark brown */
}

.resettlement {
background-color: #A52A2A; /* Brown */
}

.buffer-wards {
background-color: #9C27B0; /* Purple */
}

.corridors {
background-color: #4CAF50; /* Green */
}

.wildlife-corridors {
background-color: #FF9800; /* Orange */
}

.project-site-box {
width: 12px;
height: 12px;
display: inline-block;
margin-right: 5px;
background-color: transparent;
border: 2px solid #FF5722;
transform: rotate(45deg);
vertical-align: middle;
}

#map-info {
margin-top: 15px;
padding: 10px;
background-color: #f8f9fa;
border: 1px solid #ddd;
}

#map-info ul {
list-style-type: none;
padding-left: 10px;
}

#map-info li {
margin-bottom: 5px;
}

/* Label styles - Important: Make sure these are applied properly */
.landuse-label {
background: none !important;
border: none !important;
box-shadow: none !important;
font-size: 12px !important;
font-weight: bold !important;
color: #333 !important;
text-shadow: 2px 2px 3px white, -2px -2px 3px white, 2px -2px 3px white, -2px 2px 3px white !important;
pointer-events: none !important;
z-index: 1000 !important;
}

.place-label {
background: none !important;
border: none !important;
box-shadow: none !important;
font-size: 11px !important;
font-weight: bold !important;
color: #000 !important;
text-shadow: 2px 2px 3px white, -2px -2px 3px white, 2px -2px 3px white, -2px 2px 3px white !important;
pointer-events: none !important;
z-index: 1000 !important;
}

/* Make sure tooltips appear above everything */
.leaflet-tooltip {
z-index: 1000 !important;
}

/* Fix for positioning permanent tooltips */
.leaflet-tooltip-top:before,
.leaflet-tooltip-bottom:before,
.leaflet-tooltip-left:before,
.leaflet-tooltip-right:before {
display: none !important;
}

/* Project site icon style */
.project-site-icon div {
box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
}
</style>

<!-- Leaflet JavaScript -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
crossorigin=""></script>
</head>
<body>
<div class="container">
<h1>Hwange-Matetsi-Zambezi Area - Land Use Map</h1>
<div id="loading-indicator">Loading map data... Please wait.</div>
<div id="landuse-map"></div>
<div id="map-info">
<p>This map displays land use categories and features in the Hwange-Matetsi-Zambezi area with the following color scheme:</p>
<ul>
<li><span class="color-box national-park"></span> National Parks</li>
<li><span class="color-box forest"></span> Forest/State Forest</li>
<li><span class="color-box safari"></span> Safari Areas/Matetsi Units</li>
<li><span class="color-box community"></span> Community Conservation Areas</li>
<li><span class="color-box resettlement"></span> Resettlement Areas</li>
<li><span class="color-box buffer-wards"></span> Buffer Wards</li>
<li><span class="color-box corridors"></span> Corridors</li>
<li><span class="color-box wildlife-corridors"></span> Wildlife Corridors</li>
<li><span class="project-site-box"></span> Project Sites</li>
</ul>
<p>Click on any feature for more information. Use the layer control in the top right to toggle different map layers.</p>
</div>
</div>

<!-- Custom JavaScript - Load external map.js file -->
<script src="map.js"></script>
</body>
</html>